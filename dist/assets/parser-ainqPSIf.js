import{gR as q,fd as I,gS as _t,br as Ve,gT as We,J as $,gU as Ke,gV as Le,gW as Qe,gX as Ze}from"./index-xbq7LRAl.js";const tr=(r,a)=>{const o=q(r,a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1);return I(o,o)},er=(r,a)=>{const o=q(r,a,0,0,.5-.5*a,0,a,0,.5-.5*a,0,0,a,.5-.5*a,0,0,0,1);return I(o,o)},rr=(r,a)=>{const o=1-a,l=q(r,.2126+.7874*o,.7152-.7152*o,.0722-.0722*o,0,.2126-.2126*o,.7152+.2848*o,.0722-.0722*o,0,.2126-.2126*o,.7152-.7152*o,.0722+.9278*o,0,0,0,0,1);return I(l,l)},nr=(r,a)=>{const o=Math.sin(a*Math.PI/180),l=Math.cos(a*Math.PI/180),i=q(r,.213+.787*l-.213*o,.715-.715*l-.715*o,.072-.072*l+.928*o,0,.213-.213*l+.143*o,.715+.285*l+.14*o,.072-.072*l-.283*o,0,.213-.213*l-.787*o,.715-.715*l+.715*o,.072+.928*l+.072*o,0,0,0,0,1);return I(i,i)},ar=(r,a)=>{const o=1-2*a,l=q(r,o,0,0,a,0,o,0,a,0,0,o,a,0,0,0,1);return I(l,l)},ur=(r,a)=>{const o=q(r,.213+.787*a,.715-.715*a,.072-.072*a,0,.213-.213*a,.715+.285*a,.072-.072*a,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,1);return I(o,o)},or=(r,a)=>{const o=1-a,l=q(r,.393+.607*o,.769-.769*o,.189-.189*o,0,.349-.349*o,.686+.314*o,.168-.168*o,0,.272-.272*o,.534-.534*o,.131+.869*o,0,0,0,0,1);return I(l,l)};class V{constructor(a,o,l){this.strength=a,this.radius=o,this.threshold=l,this.type="bloom"}interpolate(a,o,l){this.strength=C(a.strength,o.strength,l),this.radius=C(a.radius,o.radius,l),this.threshold=C(a.threshold,o.threshold,l)}clone(){return new V(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:T(this.radius),strength:this.strength,threshold:this.threshold}}}let Ot=class Rt{constructor(a){this.radius=a,this.type="blur"}interpolate(a,o,l){this.radius=Math.round(C(a.radius,o.radius,l))}clone(){return new Rt(this.radius)}toJSON(){return{type:"blur",radius:T(this.radius)}}};class U{constructor(a,o){this.type=a,this.amount=o,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(a,o,l){this.amount=C(a.amount,o.amount,l),this._updateMatrix()}clone(){return new U(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const a=this._colorMatrix||_t();switch(this.type){case"brightness":this._colorMatrix=tr(a,this.amount);break;case"contrast":this._colorMatrix=er(a,this.amount);break;case"grayscale":this._colorMatrix=rr(a,this.amount);break;case"invert":this._colorMatrix=ar(a,this.amount);break;case"saturate":this._colorMatrix=ur(a,this.amount);break;case"sepia":this._colorMatrix=or(a,this.amount)}}}let St=class kt{constructor(a,o,l,i){this.offsetX=a,this.offsetY=o,this.blurRadius=l,this.color=i,this.type="drop-shadow"}interpolate(a,o,l){this.offsetX=C(a.offsetX,o.offsetX,l),this.offsetY=C(a.offsetY,o.offsetY,l),this.blurRadius=C(a.blurRadius,o.blurRadius,l),this.color[0]=Math.round(C(a.color[0],o.color[0],l)),this.color[1]=Math.round(C(a.color[1],o.color[1],l)),this.color[2]=Math.round(C(a.color[2],o.color[2],l)),this.color[3]=C(a.color[3],o.color[3],l)}clone(){return new kt(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const a=[...this.color];return a[3]*=255,{type:"drop-shadow",xoffset:T(this.offsetX),yoffset:T(this.offsetY),blurRadius:T(this.blurRadius),color:a}}},Nt=class jt{constructor(a){this.angle=a,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(a,o,l){this.angle=C(a.angle,o.angle,l),this._updateMatrix()}clone(){return new jt(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const a=this._colorMatrix||_t();this._colorMatrix=nr(a,this.angle)}};class W{constructor(a){this.amount=a,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(a,o,l){this.amount=C(a.amount,o.amount,l)}clone(){return new W(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function C(r,a,o){return r+(a-r)*o}function T(r){return Math.round(1e3*Ve(r))/1e3}function sr(r){switch(r.type){case"grayscale":case"sepia":case"invert":return new U(r.type,0);case"saturate":case"brightness":case"contrast":return new U(r.type,1);case"opacity":return new W(1);case"hue-rotate":return new Nt(0);case"blur":return new Ot(0);case"drop-shadow":return new St(0,0,0,[...We("transparent")]);case"bloom":return new V(0,0,1)}}function ir(r,a){const o=r.length>a.length?r:a;return(r.length>a.length?a:r).every((l,i)=>l.type===o[i].type)}function cr(r,a){const o=r.length>a.length?r:a,l=r.length>a.length?a:r;for(let i=l.length;i<o.length;i++)l.push(sr(o[i]))}function Or(r){const a=r[0];return!!a&&"type"in a}var Ct,Ft,Jt={exports:{}};Ft=function(){function r(i,d){function y(){this.constructor=i}y.prototype=d.prototype,i.prototype=new y}function a(i,d,y,e){var x=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(x,a.prototype),x.expected=d,x.found=y,x.location=e,x.name="SyntaxError",x}function o(i,d,y){return y=y||" ",i.length>d?i:(d-=i.length,i+(y+=y.repeat(d)).slice(0,d))}function l(i,d){var y,e={},x=(d=d!==void 0?d:{}).grammarSource,_={start:Mt},J=Mt,X="none",P=")",p=",",v="(",O="%",b="px",nt="cm",at="mm",ut="in",ot="pt",st="pc",it="deg",ct="rad",lt="grad",ft="turn",qt="#",It=".",Pt="e",ht=/^[ \t\n\r]/,pt=/^[a-z\-]/,gt=/^[0-9a-fA-F]/,mt=/^[+\-]/,N=/^[0-9]/,Yt=k("none"),zt=A("none",!1),Tt=A(")",!1),dt=A(",",!1),Ut=k("whitespace"),yt=z([" ","	",`
`,"\r"],!1,!1),Bt=k("function"),Dt=A("(",!1),Gt=k("identifier"),vt=z([["a","z"],"-"],!1,!1),Ht=k("percentage"),Vt=A("%",!1),Wt=k("length"),Kt=A("px",!1),Lt=A("cm",!1),Qt=A("mm",!1),Zt=A("in",!1),te=A("pt",!1),ee=A("pc",!1),re=k("angle"),ne=A("deg",!1),ae=A("rad",!1),ue=A("grad",!1),oe=A("turn",!1),se=k("number"),ie=k("color"),ce=A("#",!1),wt=z([["0","9"],["a","f"],["A","F"]],!1,!1),xt=z(["+","-"],!1,!1),j=z([["0","9"]],!1,!1),le=A(".",!1),fe=A("e",!1),he=function(){return[]},pe=function(t,u){return{type:"function",name:t,parameters:u||[]}},ge=function(t,u){return u.length>0?He(t,u,3):[t]},me=function(t){return{type:"quantity",value:t.value,unit:t.unit}},de=function(t){return{type:"color",colorType:t.type,value:t.value}},ye=function(t){return t},ve=function(){return G()},we=function(t){return{value:t,unit:"%"}},xe=function(t){return{value:t,unit:"px"}},be=function(t){return{value:t,unit:"cm"}},Ae=function(t){return{value:t,unit:"mm"}},Me=function(t){return{value:t,unit:"in"}},$e=function(t){return{value:t,unit:"pt"}},Ce=function(t){return{value:t,unit:"pc"}},Fe=function(t){return{value:t,unit:"deg"}},Ee=function(t){return{value:t,unit:"rad"}},_e=function(t){return{value:t,unit:"grad"}},Oe=function(t){return{value:t,unit:"turn"}},Re=function(t){return{value:t,unit:null}},Se=function(){return{type:"hex",value:G()}},ke=function(t){return{type:"function",value:t}},Ne=function(){return{type:"named",value:G()}},je=function(){return parseFloat(G())},n=0,g=0,D=[{line:1,column:1}],S=0,L=[],c=0;if("startRule"in d){if(!(d.startRule in _))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');J=_[d.startRule]}function G(){return i.substring(g,n)}function A(t,u){return{type:"literal",text:t,ignoreCase:u}}function z(t,u,s){return{type:"class",parts:t,inverted:u,ignoreCase:s}}function Je(){return{type:"end"}}function k(t){return{type:"other",description:t}}function bt(t){var u,s=D[t];if(s)return s;for(u=t-1;!D[u];)u--;for(s={line:(s=D[u]).line,column:s.column};u<t;)i.charCodeAt(u)===10?(s.line++,s.column=1):s.column++,u++;return D[t]=s,s}function At(t,u,s){var h=bt(t),w=bt(u);return{source:x,start:{offset:t,line:h.line,column:h.column},end:{offset:u,line:w.line,column:w.column}}}function f(t){n<S||(n>S&&(S=n,L=[]),L.push(t))}function Xe(t,u,s){return new a(a.buildMessage(t,u),t,u,s)}function Mt(){var t;return(t=qe())===e&&(t=Ie()),t}function qe(){var t,u;return c++,t=n,M(),i.substr(n,4)===X?(u=X,n+=4):(u=e,c===0&&f(zt)),u!==e?(M(),g=t,t=he()):(n=t,t=e),c--,t===e&&c===0&&f(Yt),t}function Ie(){var t,u;if(t=[],(u=Q())!==e)for(;u!==e;)t.push(u),u=Q();else t=e;return t}function Q(){var t,u,s,h;return t=n,M(),(u=Ye())!==e?(M(),(s=Pe())===e&&(s=null),M(),i.charCodeAt(n)===41?(h=P,n++):(h=e,c===0&&f(Tt)),h!==e?(M(),g=t,t=pe(u,s)):(n=t,t=e)):(n=t,t=e),t}function Pe(){var t,u,s,h,w,m,E,H;if(t=n,(u=Z())!==e){for(s=[],h=n,w=M(),i.charCodeAt(n)===44?(m=p,n++):(m=e,c===0&&f(dt)),m===e&&(m=null),E=M(),(H=Z())!==e?h=w=[w,m,E,H]:(n=h,h=e);h!==e;)s.push(h),h=n,w=M(),i.charCodeAt(n)===44?(m=p,n++):(m=e,c===0&&f(dt)),m===e&&(m=null),E=M(),(H=Z())!==e?h=w=[w,m,E,H]:(n=h,h=e);g=t,t=ge(u,s)}else n=t,t=e;return t}function Z(){var t,u;return t=n,(u=ze())===e&&(u=Te())===e&&(u=Ue())===e&&(u=Be()),u!==e&&(g=t,u=me(u)),(t=u)===e&&(t=n,(u=De())!==e&&(g=t,u=de(u)),t=u),t}function M(){var t,u;for(c++,t=[],ht.test(i.charAt(n))?(u=i.charAt(n),n++):(u=e,c===0&&f(yt));u!==e;)t.push(u),ht.test(i.charAt(n))?(u=i.charAt(n),n++):(u=e,c===0&&f(yt));return c--,u=e,c===0&&f(Ut),t}function Ye(){var t,u,s;return c++,t=n,(u=$t())!==e?(i.charCodeAt(n)===40?(s=v,n++):(s=e,c===0&&f(Dt)),s!==e?(g=t,t=ye(u)):(n=t,t=e)):(n=t,t=e),c--,t===e&&(u=e,c===0&&f(Bt)),t}function $t(){var t,u,s;if(c++,t=n,u=[],pt.test(i.charAt(n))?(s=i.charAt(n),n++):(s=e,c===0&&f(vt)),s!==e)for(;s!==e;)u.push(s),pt.test(i.charAt(n))?(s=i.charAt(n),n++):(s=e,c===0&&f(vt));else u=e;return u!==e&&(g=t,u=ve()),c--,(t=u)===e&&(u=e,c===0&&f(Gt)),t}function ze(){var t,u,s;return c++,t=n,M(),(u=F())!==e?(i.charCodeAt(n)===37?(s=O,n++):(s=e,c===0&&f(Vt)),s!==e?(g=t,t=we(u)):(n=t,t=e)):(n=t,t=e),c--,t===e&&c===0&&f(Ht),t}function Te(){var t,u,s;return c++,t=n,M(),(u=F())!==e?(i.substr(n,2)===b?(s=b,n+=2):(s=e,c===0&&f(Kt)),s!==e?(g=t,t=xe(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(u=F())!==e?(i.substr(n,2)===nt?(s=nt,n+=2):(s=e,c===0&&f(Lt)),s!==e?(g=t,t=be(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(u=F())!==e?(i.substr(n,2)===at?(s=at,n+=2):(s=e,c===0&&f(Qt)),s!==e?(g=t,t=Ae(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(u=F())!==e?(i.substr(n,2)===ut?(s=ut,n+=2):(s=e,c===0&&f(Zt)),s!==e?(g=t,t=Me(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(u=F())!==e?(i.substr(n,2)===ot?(s=ot,n+=2):(s=e,c===0&&f(te)),s!==e?(g=t,t=$e(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(u=F())!==e?(i.substr(n,2)===st?(s=st,n+=2):(s=e,c===0&&f(ee)),s!==e?(g=t,t=Ce(u)):(n=t,t=e)):(n=t,t=e)))))),c--,t===e&&c===0&&f(Wt),t}function Ue(){var t,u,s;return c++,t=n,(u=F())!==e?(i.substr(n,3)===it?(s=it,n+=3):(s=e,c===0&&f(ne)),s!==e?(g=t,t=Fe(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,(u=F())!==e?(i.substr(n,3)===ct?(s=ct,n+=3):(s=e,c===0&&f(ae)),s!==e?(g=t,t=Ee(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,(u=F())!==e?(i.substr(n,4)===lt?(s=lt,n+=4):(s=e,c===0&&f(ue)),s!==e?(g=t,t=_e(u)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,(u=F())!==e?(i.substr(n,4)===ft?(s=ft,n+=4):(s=e,c===0&&f(oe)),s!==e?(g=t,t=Oe(u)):(n=t,t=e)):(n=t,t=e)))),c--,t===e&&(u=e,c===0&&f(re)),t}function Be(){var t,u;return c++,t=n,M(),(u=F())!==e?(g=t,t=Re(u)):(n=t,t=e),c--,t===e&&c===0&&f(se),t}function De(){var t,u,s,h;if(c++,t=n,i.charCodeAt(n)===35?(u=qt,n++):(u=e,c===0&&f(ce)),u!==e){if(s=[],gt.test(i.charAt(n))?(h=i.charAt(n),n++):(h=e,c===0&&f(wt)),h!==e)for(;h!==e;)s.push(h),gt.test(i.charAt(n))?(h=i.charAt(n),n++):(h=e,c===0&&f(wt));else s=e;s!==e?(g=t,t=Se()):(n=t,t=e)}else n=t,t=e;return t===e&&(t=n,(u=Q())!==e&&(g=t,u=ke(u)),(t=u)===e&&(t=n,(u=$t())!==e&&(g=t,u=Ne()),t=u)),c--,t===e&&(u=e,c===0&&f(ie)),t}function F(){var t,u,s,h,w,m,E;for(t=n,mt.test(i.charAt(n))?(i.charAt(n),n++):c===0&&f(xt),u=n,s=[],N.test(i.charAt(n))?(h=i.charAt(n),n++):(h=e,c===0&&f(j));h!==e;)s.push(h),N.test(i.charAt(n))?(h=i.charAt(n),n++):(h=e,c===0&&f(j));if(i.charCodeAt(n)===46?(h=It,n++):(h=e,c===0&&f(le)),h!==e){if(w=[],N.test(i.charAt(n))?(m=i.charAt(n),n++):(m=e,c===0&&f(j)),m!==e)for(;m!==e;)w.push(m),N.test(i.charAt(n))?(m=i.charAt(n),n++):(m=e,c===0&&f(j));else w=e;w!==e?u=s=[s,h,w]:(n=u,u=e)}else n=u,u=e;if(u===e)if(u=[],N.test(i.charAt(n))?(s=i.charAt(n),n++):(s=e,c===0&&f(j)),s!==e)for(;s!==e;)u.push(s),N.test(i.charAt(n))?(s=i.charAt(n),n++):(s=e,c===0&&f(j));else u=e;if(u!==e){if(s=n,i.charCodeAt(n)===101?(h=Pt,n++):(h=e,c===0&&f(fe)),h!==e){if(mt.test(i.charAt(n))?(w=i.charAt(n),n++):(w=e,c===0&&f(xt)),w===e&&(w=null),m=[],N.test(i.charAt(n))?(E=i.charAt(n),n++):(E=e,c===0&&f(j)),E!==e)for(;E!==e;)m.push(E),N.test(i.charAt(n))?(E=i.charAt(n),n++):(E=e,c===0&&f(j));else m=e;m!==e?s=h=[h,w,m]:(n=s,s=e)}else n=s,s=e;s===e&&(s=null),g=t,t=je()}else n=t,t=e;return t}function Ge(t,u){return t.map(function(s){return s[u]})}function He(t,u,s){return[t].concat(Ge(u,s))}if((y=J())!==e&&n===i.length)return y;throw y!==e&&n<i.length&&f(Je()),Xe(L,S<i.length?i.charAt(S):null,S<i.length?At(S,S+1):At(S,S))}return r(a,Error),a.prototype.format=function(i){var d="Error: "+this.message;if(this.location){var y,e=null;for(y=0;y<i.length;y++)if(i[y].source===this.location.source){e=i[y].text.split(/\r\n|\n|\r/g);break}var x=this.location.start,_=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(x):x,J=this.location.source+":"+_.line+":"+_.column;if(e){var X=this.location.end,P=o("",_.line.toString().length," "),p=e[x.line-1],v=(x.line===X.line?X.column:p.length+1)-x.column||1;d+=`
 --> `+J+`
`+P+` |
`+_.line+" | "+p+`
`+P+" | "+o("",x.column-1," ")+o("",v,"^")}else d+=`
 at `+J}return d},a.buildMessage=function(i,d){var y={literal:function(p){return'"'+x(p.text)+'"'},class:function(p){var v=p.parts.map(function(O){return Array.isArray(O)?_(O[0])+"-"+_(O[1]):_(O)});return"["+(p.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function e(p){return p.charCodeAt(0).toString(16).toUpperCase()}function x(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+e(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+e(v)})}function _(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+e(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+e(v)})}function J(p){return y[p.type](p)}function X(p){var v,O,b=p.map(J);if(b.sort(),b.length>0){for(v=1,O=1;v<b.length;v++)b[v-1]!==b[v]&&(b[O]=b[v],O++);b.length=O}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function P(p){return p?'"'+x(p)+'"':"end of input"}return"Expected "+X(i)+" but "+P(d)+" found."},{SyntaxError:a,parse:l}},(Ct=Jt).exports&&(Ct.exports=Ft());var lr=Jt.exports;function Rr(r){if(!r||r.length===0)return null;if(typeof r=="string"){const o=Et(r);return o&&o.length!==0?o:null}const a=r.map(o=>{if(!Number.isFinite(o.scale)||o.scale<=0)throw new $("effect:invalid-scale","scale must be finite and greater than 0",{stop:o});return{scale:o.scale,effects:Et(o.value)}});a.sort((o,l)=>l.effects.length-o.effects.length);for(let o=0;o<a.length-1;o++){if(!ir(a[o].effects,a[o+1].effects))throw new $("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:a[o].effects,b:a[o+1].effects});cr(a[o].effects,a[o+1].effects)}return a.sort((o,l)=>l.scale-o.scale),a}function Et(r){let a;if(!r)return[];try{a=lr.parse(r)}catch(o){throw new $("effect:invalid-syntax","Invalid effect syntax",{value:r,error:o})}return a.map(o=>fr(o))}function fr(r){try{switch(r.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return hr(r);case"opacity":return pr(r);case"hue-rotate":return gr(r);case"blur":return mr(r);case"drop-shadow":return dr(r);case"bloom":return yr(r)}}catch(a){throw a.details.filter=r,a}throw new $("effect:unknown-effect",`Effect '${r.name}' is not supported`,{effect:r})}function hr(r){let a=1;return Y(r.parameters,1),r.parameters.length===1&&(a=R(r.parameters[0])),new U(r.name,a)}function pr(r){let a=1;return Y(r.parameters,1),r.parameters.length===1&&(a=R(r.parameters[0])),new W(a)}function gr(r){let a=0;return Y(r.parameters,1),r.parameters.length===1&&(a=Mr(r.parameters[0])),new Nt(a)}function mr(r){let a=0;return Y(r.parameters,1),r.parameters.length===1&&(a=rt(r.parameters[0]),B(a,r.parameters[0])),new Ot(a)}function dr(r){const a=[];let o=null;for(const l of r.parameters)if(l.type==="color"){if(a.length&&Object.freeze(a),o)throw new $("effect:type-error","Accepts only one color",{});o=$r(l)}else{const i=rt(l);if(Object.isFrozen(a))throw new $("effect:type-error","<length> parameters not consecutive",{lengths:a});a.push(i),a.length===3&&B(i,l)}if(a.length<2||a.length>3)throw new $("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${a.length}}`,{lengths:a});return new St(a[0],a[1],a[2]||0,o||Xt("black"))}function yr(r){let a=1,o=0,l=0;return Y(r.parameters,3),r.parameters[0]&&(a=R(r.parameters[0])),r.parameters[1]&&(o=rt(r.parameters[1]),B(o,r.parameters[1])),r.parameters[2]&&(l=R(r.parameters[2])),new V(a,o,l)}function Y(r,a){if(r.length>a)throw new $("effect:type-error",`Function supports up to ${a} parameters, Actual: ${r.length}`,{parameters:r})}function K(r){if(r.type==="color")return"<color>";if(r.unit){if(r.unit in et)return"<length>";if(r.unit in tt)return"<angle>";if(r.unit==="%")return"<percentage>"}return"<double>"}function B(r,a){if(r<0)throw new $("effect:type-error",`Negative values are not allowed, Actual: ${r}`,{term:a})}function vr(r){if(r.type!=="quantity"||r.unit!==null)throw new $("effect:type-error",`Expected <double>, Actual: ${K(r)}`,{term:r})}function wr(r){if(r.type!=="quantity"||r.unit!==null&&r.unit!=="%")throw new $("effect:type-error",`Expected <double> or <percentage>, Actual: ${K(r)}`,{term:r})}const tt={deg:1,grad:.9,rad:180/Math.PI,turn:360};function xr(r){if(r.type!=="quantity"||!(r.value===0&&r.unit===null||r.unit&&tt[r.unit]!=null))throw new $("effect:type-error",`Expected <angle>, Actual: ${K(r)}`,{term:r})}const et={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function br(r){if(r.type!=="quantity"||!(r.value===0&&r.unit===null||r.unit&&et[r.unit]!=null))throw new $("effect:type-error",`Expected <length>, Actual: ${K(r)}`,{term:r})}function R(r){wr(r);const a=r.value;return B(a,r),r.unit==="%"?.01*a:a}function Ar(r){return vr(r),B(r.value,r),r.value}function Mr(r){return xr(r),r.value*tt[r.unit]||0}function rt(r){return br(r),r.value*et[r.unit]||0}function $r(r){switch(r.colorType){case"hex":return Ke(r.value);case"named":return Xt(r.value);case"function":return Er(r.value)}}function Xt(r){if(!Le(r))throw new $("effect:unknown-color",`color '${r}' isn't valid`,{namedColor:r});return Qe(r)}const Cr=/^rgba?/i,Fr=/^hsla?/i;function Er(r){if(Y(r.parameters,4),Cr.test(r.name))return[R(r.parameters[0]),R(r.parameters[1]),R(r.parameters[2]),r.parameters[3]?R(r.parameters[3]):1];if(Fr.test(r.name))return Ze(Ar(r.parameters[0]),R(r.parameters[1]),R(r.parameters[2]),r.parameters[3]?R(r.parameters[3]):1);throw new $("effect:syntax-error",`Invalid color function '${r.name}'`,{colorFunction:r})}export{cr as e,Or as l,ir as t,Rr as y};
